name = "telegram-loyalty-bot"
main = "src/index.js"
compatibility_date = "2023-10-30"
compatibility_flags = ["nodejs_compat"]

# Custom domain configuration
[[routes]]
pattern = "telegram-demo.loyalteez.app/*"
zone_name = "loyalteez.app"

# Service bindings for faster worker-to-worker communication (avoids 522 timeouts)
[[services]]
binding = "EVENT_HANDLER"
service = "loyalteez-event-handler"

[[services]]
binding = "PREGENERATION"
service = "loyalteez-pregeneration"

[vars]
# Required: Your Loyalteez Brand Address (0x...)
# Get this from Partner Portal → Settings → Account Overview
BRAND_ID = "0xf8964eB6D654659a4935363595db1095474Be22F"

# Optional: API URL (defaults to production)
LOYALTEEZ_API_URL = "https://api.loyalteez.app"

# Optional: Custom welcome message (reserved for future use)
WELCOME_MESSAGE = "Welcome to the community! You've earned LTZ tokens."

# Secrets (Set these via `wrangler secret put NAME`)
# Required: TELEGRAM_BOT_TOKEN - Get from @BotFather
# Optional: WEBHOOK_SECRET - Random string for webhook verification
# See CONFIGURATION.md for details

# KV Namespace for configuration persistence
[[kv_namespaces]]
binding = "TELEGRAM_BOT_KV"
id = "0580646cd23848b8953d2e7fab82fad3"
preview_id = "c82762f53ee44fc3a509ac929f4aeece"
